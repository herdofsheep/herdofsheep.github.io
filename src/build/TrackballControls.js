import{g as e,a as t,V as o,Q as n,h as a}from"./three.module-98a4b09c.js";var c=function(a,c){void 0===c&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),c===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');var s=this,i=-1,r=0,p=1,d=2,m=3,h=4;this.object=a,this.domElement=c,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.mouseButtons={LEFT:e.ROTATE,MIDDLE:e.ZOOM,RIGHT:e.PAN},this.target=new t;var u=1e-6,l=new t,g=1,y=i,b=i,v=new t,E=new o,w=new o,f=new t,j=0,L=new o,D=new o,k=0,T=0,C=new o,z=new o;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom;var Y={type:"change"},P={type:"start"},x={type:"end"};this.handleResize=function(){var e=s.domElement.getBoundingClientRect(),t=s.domElement.ownerDocument.documentElement;s.screen.left=e.left+window.pageXOffset-t.clientLeft,s.screen.top=e.top+window.pageYOffset-t.clientTop,s.screen.width=e.width,s.screen.height=e.height};var X,R,S,M,O,A,V,q,F,Z,H,B=(X=new o,function(e,t){return X.set((e-s.screen.left)/s.screen.width,(t-s.screen.top)/s.screen.height),X}),Q=function(){var e=new o;return function(t,o){return e.set((t-.5*s.screen.width-s.screen.left)/(.5*s.screen.width),(s.screen.height+2*(s.screen.top-o))/s.screen.width),e}}();function I(e){if(!1!==s.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(e.preventDefault(),e.stopPropagation(),y===i)switch(e.button){case s.mouseButtons.LEFT:y=r;break;case s.mouseButtons.MIDDLE:y=p;break;case s.mouseButtons.RIGHT:y=d;break;default:y=i}var t=b!==i?b:y;t!==r||s.noRotate?t!==p||s.noZoom?t!==d||s.noPan||(C.copy(B(e.pageX,e.pageY)),z.copy(C)):(L.copy(B(e.pageX,e.pageY)),D.copy(L)):(w.copy(Q(e.pageX,e.pageY)),E.copy(w));s.domElement.ownerDocument.addEventListener("pointermove",U,!1),s.domElement.ownerDocument.addEventListener("pointerup",G,!1),s.dispatchEvent(P)}(e)}}function U(e){if(!1!==s.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1===s.enabled)return;e.preventDefault(),e.stopPropagation();var t=b!==i?b:y;t!==r||s.noRotate?t!==p||s.noZoom?t!==d||s.noPan||z.copy(B(e.pageX,e.pageY)):D.copy(B(e.pageX,e.pageY)):(E.copy(w),w.copy(Q(e.pageX,e.pageY)))}(e)}}function G(e){if(!1!==s.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1===s.enabled)return;e.preventDefault(),e.stopPropagation(),y=i,s.domElement.ownerDocument.removeEventListener("pointermove",U),s.domElement.ownerDocument.removeEventListener("pointerup",G),s.dispatchEvent(x)}(e)}}function W(e){!1!==s.enabled&&(window.removeEventListener("keydown",W),b===i&&(e.keyCode!==s.keys[r]||s.noRotate?e.keyCode!==s.keys[p]||s.noZoom?e.keyCode!==s.keys[d]||s.noPan||(b=d):b=p:b=r))}function N(){!1!==s.enabled&&(b=i,window.addEventListener("keydown",W,!1))}function J(e){if(!1!==s.enabled&&!0!==s.noZoom){switch(e.preventDefault(),e.stopPropagation(),e.deltaMode){case 2:L.y-=.025*e.deltaY;break;case 1:L.y-=.01*e.deltaY;break;default:L.y-=25e-5*e.deltaY}s.dispatchEvent(P),s.dispatchEvent(x)}}function K(e){if(!1!==s.enabled){switch(e.preventDefault(),e.touches.length){case 1:y=m,w.copy(Q(e.touches[0].pageX,e.touches[0].pageY)),E.copy(w);break;default:y=h;var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY;T=k=Math.sqrt(t*t+o*o);var n=(e.touches[0].pageX+e.touches[1].pageX)/2,a=(e.touches[0].pageY+e.touches[1].pageY)/2;C.copy(B(n,a)),z.copy(C)}s.dispatchEvent(P)}}function $(e){if(!1!==s.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:E.copy(w),w.copy(Q(e.touches[0].pageX,e.touches[0].pageY));break;default:var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY;T=Math.sqrt(t*t+o*o);var n=(e.touches[0].pageX+e.touches[1].pageX)/2,a=(e.touches[0].pageY+e.touches[1].pageY)/2;z.copy(B(n,a))}}function _(e){if(!1!==s.enabled){switch(e.touches.length){case 0:y=i;break;case 1:y=m,w.copy(Q(e.touches[0].pageX,e.touches[0].pageY)),E.copy(w)}s.dispatchEvent(x)}}function ee(e){!1!==s.enabled&&e.preventDefault()}this.rotateCamera=(S=new t,M=new n,O=new t,A=new t,V=new t,q=new t,function(){q.set(w.x-E.x,w.y-E.y,0),(R=q.length())?(v.copy(s.object.position).sub(s.target),O.copy(v).normalize(),A.copy(s.object.up).normalize(),V.crossVectors(A,O).normalize(),A.setLength(w.y-E.y),V.setLength(w.x-E.x),q.copy(A.add(V)),S.crossVectors(q,v).normalize(),R*=s.rotateSpeed,M.setFromAxisAngle(S,R),v.applyQuaternion(M),s.object.up.applyQuaternion(M),f.copy(S),j=R):!s.staticMoving&&j&&(j*=Math.sqrt(1-s.dynamicDampingFactor),v.copy(s.object.position).sub(s.target),M.setFromAxisAngle(f,j),v.applyQuaternion(M),s.object.up.applyQuaternion(M)),E.copy(w)}),this.zoomCamera=function(){var e;y===h?(e=k/T,k=T,s.object.isPerspectiveCamera?v.multiplyScalar(e):s.object.isOrthographicCamera?(s.object.zoom*=e,s.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(1!==(e=1+(D.y-L.y)*s.zoomSpeed)&&e>0&&(s.object.isPerspectiveCamera?v.multiplyScalar(e):s.object.isOrthographicCamera?(s.object.zoom/=e,s.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),s.staticMoving?L.copy(D):L.y+=(D.y-L.y)*this.dynamicDampingFactor)},this.panCamera=(F=new o,Z=new t,H=new t,function(){if(F.copy(z).sub(C),F.lengthSq()){if(s.object.isOrthographicCamera){var e=(s.object.right-s.object.left)/s.object.zoom/s.domElement.clientWidth,t=(s.object.top-s.object.bottom)/s.object.zoom/s.domElement.clientWidth;F.x*=e,F.y*=t}F.multiplyScalar(v.length()*s.panSpeed),H.copy(v).cross(s.object.up).setLength(F.x),H.add(Z.copy(s.object.up).setLength(F.y)),s.object.position.add(H),s.target.add(H),s.staticMoving?C.copy(z):C.add(F.subVectors(z,C).multiplyScalar(s.dynamicDampingFactor))}}),this.checkDistances=function(){s.noZoom&&s.noPan||(v.lengthSq()>s.maxDistance*s.maxDistance&&(s.object.position.addVectors(s.target,v.setLength(s.maxDistance)),L.copy(D)),v.lengthSq()<s.minDistance*s.minDistance&&(s.object.position.addVectors(s.target,v.setLength(s.minDistance)),L.copy(D)))},this.update=function(){v.subVectors(s.object.position,s.target),s.noRotate||s.rotateCamera(),s.noZoom||s.zoomCamera(),s.noPan||s.panCamera(),s.object.position.addVectors(s.target,v),s.object.isPerspectiveCamera?(s.checkDistances(),s.object.lookAt(s.target),l.distanceToSquared(s.object.position)>u&&(s.dispatchEvent(Y),l.copy(s.object.position))):s.object.isOrthographicCamera?(s.object.lookAt(s.target),(l.distanceToSquared(s.object.position)>u||g!==s.object.zoom)&&(s.dispatchEvent(Y),l.copy(s.object.position),g=s.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){y=i,b=i,s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.up.copy(s.up0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),v.subVectors(s.object.position,s.target),s.object.lookAt(s.target),s.dispatchEvent(Y),l.copy(s.object.position),g=s.object.zoom},this.dispose=function(){s.domElement.removeEventListener("contextmenu",ee,!1),s.domElement.removeEventListener("pointerdown",I,!1),s.domElement.removeEventListener("wheel",J,!1),s.domElement.removeEventListener("touchstart",K,!1),s.domElement.removeEventListener("touchend",_,!1),s.domElement.removeEventListener("touchmove",$,!1),s.domElement.ownerDocument.removeEventListener("pointermove",U,!1),s.domElement.ownerDocument.removeEventListener("pointerup",G,!1),window.removeEventListener("keydown",W,!1),window.removeEventListener("keyup",N,!1)},this.domElement.addEventListener("contextmenu",ee,!1),this.domElement.addEventListener("pointerdown",I,!1),this.domElement.addEventListener("wheel",J,!1),this.domElement.addEventListener("touchstart",K,!1),this.domElement.addEventListener("touchend",_,!1),this.domElement.addEventListener("touchmove",$,!1),this.domElement.ownerDocument.addEventListener("pointermove",U,!1),this.domElement.ownerDocument.addEventListener("pointerup",G,!1),window.addEventListener("keydown",W,!1),window.addEventListener("keyup",N,!1),this.handleResize(),this.update()};(c.prototype=Object.create(a.prototype)).constructor=c;export{c as T};
