import{V as e,L as t,n as r,G as s,b as i,F as n,x as a,w as o,v as l,j as h,J as c,O as u,l as d,S as p,C as m,P as f,g as v,A as g}from"./three.module-8bdb5506.js";import"./lodash-a1d2dbc5.js";import{O as b}from"./OrbitControls-f051dd87.js";import{interpolateCool as w}from"d3";var y=function(){var p=/^[og]\s*(.+)?/,m=/^mtllib /,f=/^usemtl /,v=/^usemap /,g=new e,b=new e,w=new e,y=new e,j=new e;function x(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var r=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(e,t){var r=this._finalize(!1);r&&(r.inherited||r.groupCount<=0)&&this.materials.splice(r.index,1);var s={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==r?r.smooth:this.smooth,groupStart:void 0!==r?r.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(s),s},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var r=this.materials.length-1;r>=0;r--)this.materials[r].groupCount<=0&&this.materials.splice(r,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},r&&r.name&&"function"==typeof r.clone){var s=r.clone(0);s.inherited=!0,this.object.materials.push(s)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var r=parseInt(e,10);return 3*(r>=0?r-1:r+t/3)},parseNormalIndex:function(e,t){var r=parseInt(e,10);return 3*(r>=0?r-1:r+t/3)},parseUVIndex:function(e,t){var r=parseInt(e,10);return 2*(r>=0?r-1:r+t/2)},addVertex:function(e,t,r){var s=this.vertices,i=this.object.geometry.vertices;i.push(s[e+0],s[e+1],s[e+2]),i.push(s[t+0],s[t+1],s[t+2]),i.push(s[r+0],s[r+1],s[r+2])},addVertexPoint:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,r){var s=this.normals,i=this.object.geometry.normals;i.push(s[e+0],s[e+1],s[e+2]),i.push(s[t+0],s[t+1],s[t+2]),i.push(s[r+0],s[r+1],s[r+2])},addFaceNormal:function(e,t,r){var s=this.vertices,i=this.object.geometry.normals;g.fromArray(s,e),b.fromArray(s,t),w.fromArray(s,r),j.subVectors(w,b),y.subVectors(g,b),j.cross(y),j.normalize(),i.push(j.x,j.y,j.z),i.push(j.x,j.y,j.z),i.push(j.x,j.y,j.z)},addColor:function(e,t,r){var s=this.colors,i=this.object.geometry.colors;void 0!==s[e]&&i.push(s[e+0],s[e+1],s[e+2]),void 0!==s[t]&&i.push(s[t+0],s[t+1],s[t+2]),void 0!==s[r]&&i.push(s[r+0],s[r+1],s[r+2])},addUV:function(e,t,r){var s=this.uvs,i=this.object.geometry.uvs;i.push(s[e+0],s[e+1]),i.push(s[t+0],s[t+1]),i.push(s[r+0],s[r+1])},addDefaultUV:function(){var e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){var t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,r,s,i,n,a,o,l){var h=this.vertices.length,c=this.parseVertexIndex(e,h),u=this.parseVertexIndex(t,h),d=this.parseVertexIndex(r,h);if(this.addVertex(c,u,d),this.addColor(c,u,d),void 0!==a&&""!==a){var p=this.normals.length;c=this.parseNormalIndex(a,p),u=this.parseNormalIndex(o,p),d=this.parseNormalIndex(l,p),this.addNormal(c,u,d)}else this.addFaceNormal(c,u,d);if(void 0!==s&&""!==s){var m=this.uvs.length;c=this.parseUVIndex(s,m),u=this.parseUVIndex(i,m),d=this.parseUVIndex(n,m),this.addUV(c,u,d),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,r=0,s=e.length;r<s;r++){var i=this.parseVertexIndex(e[r],t);this.addVertexPoint(i),this.addColor(i)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var r=this.vertices.length,s=this.uvs.length,i=0,n=e.length;i<n;i++)this.addVertexLine(this.parseVertexIndex(e[i],r));var a=0;for(n=t.length;a<n;a++)this.addUVLine(this.parseUVIndex(t[a],s))}};return e.startObject("",!1),e}function V(e){t.call(this,e),this.materials=null}return V.prototype=Object.assign(Object.create(t.prototype),{constructor:V,load:function(e,t,s,i){var n=this,a=new r(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(r){try{t(n.parse(r))}catch(t){i?i(t):console.error(t),n.manager.itemError(e)}}),s,i)},setMaterials:function(e){return this.materials=e,this},parse:function(e){var t=new x;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));for(var r=e.split("\n"),g="",b="",w=[],y="function"==typeof"".trimLeft,j=0,V=r.length;j<V;j++)if(g=r[j],0!==(g=y?g.trimLeft():g.trim()).length&&"#"!==(b=g.charAt(0)))if("v"===b){var F=g.split(/\s+/);switch(F[0]){case"v":t.vertices.push(parseFloat(F[1]),parseFloat(F[2]),parseFloat(F[3])),F.length>=7?t.colors.push(parseFloat(F[4]),parseFloat(F[5]),parseFloat(F[6])):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(F[1]),parseFloat(F[2]),parseFloat(F[3]));break;case"vt":t.uvs.push(parseFloat(F[1]),parseFloat(F[2]))}}else if("f"===b){for(var z=g.substr(1).trim().split(/\s+/),I=[],L=0,A=z.length;L<A;L++){var C=z[L];if(C.length>0){var E=C.split("/");I.push(E)}}var U=I[0];for(L=1,A=I.length-1;L<A;L++){var O=I[L],M=I[L+1];t.addFace(U[0],O[0],M[0],U[1],O[1],M[1],U[2],O[2],M[2])}}else if("l"===b){var _=g.substring(1).trim().split(" "),N=[],P=[];if(-1===g.indexOf("/"))N=_;else for(var S=0,G=_.length;S<G;S++){var H=_[S].split("/");""!==H[0]&&N.push(H[0]),""!==H[1]&&P.push(H[1])}t.addLineGeometry(N,P)}else if("p"===b){var B=g.substr(1).trim().split(" ");t.addPointGeometry(B)}else if(null!==(w=p.exec(g))){var D=(" "+w[0].substr(1).trim()).substr(1);t.startObject(D)}else if(f.test(g))t.object.startMaterial(g.substring(7).trim(),t.materialLibraries);else if(m.test(g))t.materialLibraries.push(g.substring(7).trim());else if(v.test(g))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===b){if((w=g.split(" ")).length>1){var R=w[1].trim().toLowerCase();t.object.smooth="0"!==R&&"off"!==R}else t.object.smooth=!0;(te=t.object.currentMaterial())&&(te.smooth=t.object.smooth)}else{if("\0"===g)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+g+'"')}t.finalize();var T=new s;if(T.materialLibraries=[].concat(t.materialLibraries),!0===!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(j=0,V=t.objects.length;j<V;j++){var k=t.objects[j],q=k.geometry,J=k.materials,W="Line"===q.type,$="Points"===q.type,Z=!1;if(0!==q.vertices.length){(ne=new i).setAttribute("position",new n(q.vertices,3)),q.normals.length>0&&ne.setAttribute("normal",new n(q.normals,3)),q.colors.length>0&&(Z=!0,ne.setAttribute("color",new n(q.colors,3))),!0===q.hasUVIndices&&ne.setAttribute("uv",new n(q.uvs,2));for(var K,Q=[],X=0,Y=J.length;X<Y;X++){var ee=(ie=J[X]).name+"_"+ie.smooth+"_"+Z,te=t.materials[ee];if(null!==this.materials)if(te=this.materials.create(ie.name),!W||!te||te instanceof a){if($&&te&&!(te instanceof l)){var re=new l({size:10,sizeAttenuation:!1});o.prototype.copy.call(re,te),re.color.copy(te.color),re.map=te.map,te=re}}else{var se=new a;o.prototype.copy.call(se,te),se.color.copy(te.color),te=se}void 0===te&&((te=W?new a:$?new l({size:1,sizeAttenuation:!1}):new h).name=ie.name,te.flatShading=!ie.smooth,te.vertexColors=Z,t.materials[ee]=te),Q.push(te)}if(Q.length>1){for(X=0,Y=J.length;X<Y;X++){var ie=J[X];ne.addGroup(ie.groupStart,ie.groupCount,X)}K=W?new c(ne,Q):$?new u(ne,Q):new d(ne,Q)}else K=W?new c(ne,Q[0]):$?new u(ne,Q[0]):new d(ne,Q[0]);K.name=k.name,T.add(K)}}else if(t.vertices.length>0){var ne;te=new l({size:1,sizeAttenuation:!1});(ne=new i).setAttribute("position",new n(t.vertices,3)),t.colors.length>0&&(ne.setAttribute("color",new n(t.colors,3)),te.vertexColors=!0);var ae=new u(ne,te);T.add(ae)}return T}}),V}();let j,x,V,F,z,I,L,A;function C(){$.get("./../../assets/data/f80bd6d9-9a6d-4f4d-8f23-ef63b2c851d4_sun.ill",(function(e){E(e,"values")})),$.get("./../../assets/data/f80bd6d9-9a6d-4f4d-8f23-ef63b2c851d4.pts",(function(e){E(e,"points")}))}function E(e,t){"values"==t&&(I=e),"points"==t&&(z=e),null!=z&&null!=I&&function(){var e=z.split(/\r\n|\n|\r/);e=e.filter((e=>e.length>0)),L=[];for(var t=0;t<e.length;t+=1){o=(o=e[t].split(" ")).filter((e=>e.length>0));var r={};r.x=o[0],r.y=o[1],r.z=o[2],L.push(r)}var s=I.split(/\r\n|\n|\r/),a=s.slice(14,s.length);a=a.filter((e=>e.length>0)),A=[];for(t=0;t<a.length;t+=1){var o;o=(o=a[t].split(" ")).filter((e=>e.length>0));for(var h=0,c=0;c<o.length;c+=1)h+=parseFloat(o[c]);var d=h/o.length;A.push(d)}!function(){for(var e=[],t=0;t<L.length;t+=1){var r=parseFloat(L[t].x),s=parseFloat(L[t].y),a=parseFloat(L[t].z),o=4;e.push(r*o,s*o,a*o)}const h=[],c=new m;for(t=0;t<e.length;t++){var d=w(A[t]/Math.max(...A)),p=d.substring(4,d.length-1).replace(/ /g,"").split(","),f=parseFloat(p[0])/255,v=parseFloat(p[1])/255,g=parseFloat(p[2])/255;c.setRGB(f,v,g),h.push(c.r,c.g,c.b)}const b=new i;b.setAttribute("position",new n(e,3)),b.setAttribute("color",new n(h,3)),b.computeBoundingSphere();const y=new l({size:3,vertexColors:!0});var x=new u(b,y);j.add(x),U()}()}()}function U(){V.render(j,x),requestAnimationFrame(U)}window.addEventListener("load",(function(){j=new p,j.background=new m(16777215),x=new f(75,window.innerWidth/window.innerHeight,.1,1e3),x.position.z=40,F=document.getElementById("container"),V=new v,V.setSize(window.innerWidth,window.innerHeight),F.appendChild(V.domElement);new b(x,V.domElement).enableZoom=!1,j.add(new g(4210752)),C();new y;document.body.appendChild(V.domElement),C()}));
