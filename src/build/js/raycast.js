import{L as e,h as t,G as o}from"./GLTFLoader-267b3217.js";import{M as i,V as r,a as n,Q as s,E as a,B as c,b as h,I as l,c as u,T as d,d as p,e as m,P as g,S as f,C as y,W as b,A as v,f as w,g as E,G as x,h as k,i as j,j as T,k as B,l as M,F as S}from"./three.module-057af6ef.js";import"./lodash-a1d2dbc5.js";var A=function(e,t){void 0===t&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');var o=this,a=-1,c=0,h=1,l=2,u=3,d=4;this.object=e,this.domElement=t,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.mouseButtons={LEFT:i.ROTATE,MIDDLE:i.ZOOM,RIGHT:i.PAN},this.target=new r;var p=1e-6,m=new r,g=1,f=a,y=a,b=new r,v=new n,w=new n,E=new r,x=0,k=new n,j=new n,T=0,B=0,M=new n,S=new n;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom;var A={type:"change"},L={type:"start"},D={type:"end"};this.handleResize=function(){var e=o.domElement.getBoundingClientRect(),t=o.domElement.ownerDocument.documentElement;o.screen.left=e.left+window.pageXOffset-t.clientLeft,o.screen.top=e.top+window.pageYOffset-t.clientTop,o.screen.width=e.width,o.screen.height=e.height};var z,R,C,P,X,G,Y,H,O,U,V,I=(z=new n,function(e,t){return z.set((e-o.screen.left)/o.screen.width,(t-o.screen.top)/o.screen.height),z}),q=function(){var e=new n;return function(t,i){return e.set((t-.5*o.screen.width-o.screen.left)/(.5*o.screen.width),(o.screen.height+2*(o.screen.top-i))/o.screen.width),e}}();function F(e){if(!1!==o.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(e.preventDefault(),e.stopPropagation(),f===a)switch(e.button){case o.mouseButtons.LEFT:f=c;break;case o.mouseButtons.MIDDLE:f=h;break;case o.mouseButtons.RIGHT:f=l;break;default:f=a}var t=y!==a?y:f;t!==c||o.noRotate?t!==h||o.noZoom?t!==l||o.noPan||(M.copy(I(e.pageX,e.pageY)),S.copy(M)):(k.copy(I(e.pageX,e.pageY)),j.copy(k)):(w.copy(q(e.pageX,e.pageY)),v.copy(w));o.domElement.ownerDocument.addEventListener("pointermove",W,!1),o.domElement.ownerDocument.addEventListener("pointerup",Z,!1),o.dispatchEvent(L)}(e)}}function W(e){if(!1!==o.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1===o.enabled)return;e.preventDefault(),e.stopPropagation();var t=y!==a?y:f;t!==c||o.noRotate?t!==h||o.noZoom?t!==l||o.noPan||S.copy(I(e.pageX,e.pageY)):j.copy(I(e.pageX,e.pageY)):(v.copy(w),w.copy(q(e.pageX,e.pageY)))}(e)}}function Z(e){if(!1!==o.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1===o.enabled)return;e.preventDefault(),e.stopPropagation(),f=a,o.domElement.ownerDocument.removeEventListener("pointermove",W),o.domElement.ownerDocument.removeEventListener("pointerup",Z),o.dispatchEvent(D)}(e)}}function _(e){!1!==o.enabled&&(window.removeEventListener("keydown",_),y===a&&(e.keyCode!==o.keys[c]||o.noRotate?e.keyCode!==o.keys[h]||o.noZoom?e.keyCode!==o.keys[l]||o.noPan||(y=l):y=h:y=c))}function $(){!1!==o.enabled&&(y=a,window.addEventListener("keydown",_,!1))}function N(e){if(!1!==o.enabled&&!0!==o.noZoom){switch(e.preventDefault(),e.stopPropagation(),e.deltaMode){case 2:k.y-=.025*e.deltaY;break;case 1:k.y-=.01*e.deltaY;break;default:k.y-=25e-5*e.deltaY}o.dispatchEvent(L),o.dispatchEvent(D)}}function Q(e){if(!1!==o.enabled){switch(e.preventDefault(),e.touches.length){case 1:f=u,w.copy(q(e.touches[0].pageX,e.touches[0].pageY)),v.copy(w);break;default:f=d;var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY;B=T=Math.sqrt(t*t+i*i);var r=(e.touches[0].pageX+e.touches[1].pageX)/2,n=(e.touches[0].pageY+e.touches[1].pageY)/2;M.copy(I(r,n)),S.copy(M)}o.dispatchEvent(L)}}function J(e){if(!1!==o.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:v.copy(w),w.copy(q(e.touches[0].pageX,e.touches[0].pageY));break;default:var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY;B=Math.sqrt(t*t+i*i);var r=(e.touches[0].pageX+e.touches[1].pageX)/2,n=(e.touches[0].pageY+e.touches[1].pageY)/2;S.copy(I(r,n))}}function K(e){if(!1!==o.enabled){switch(e.touches.length){case 0:f=a;break;case 1:f=u,w.copy(q(e.touches[0].pageX,e.touches[0].pageY)),v.copy(w)}o.dispatchEvent(D)}}function ee(e){!1!==o.enabled&&e.preventDefault()}this.rotateCamera=(C=new r,P=new s,X=new r,G=new r,Y=new r,H=new r,function(){H.set(w.x-v.x,w.y-v.y,0),(R=H.length())?(b.copy(o.object.position).sub(o.target),X.copy(b).normalize(),G.copy(o.object.up).normalize(),Y.crossVectors(G,X).normalize(),G.setLength(w.y-v.y),Y.setLength(w.x-v.x),H.copy(G.add(Y)),C.crossVectors(H,b).normalize(),R*=o.rotateSpeed,P.setFromAxisAngle(C,R),b.applyQuaternion(P),o.object.up.applyQuaternion(P),E.copy(C),x=R):!o.staticMoving&&x&&(x*=Math.sqrt(1-o.dynamicDampingFactor),b.copy(o.object.position).sub(o.target),P.setFromAxisAngle(E,x),b.applyQuaternion(P),o.object.up.applyQuaternion(P)),v.copy(w)}),this.zoomCamera=function(){var e;f===d?(e=T/B,T=B,o.object.isPerspectiveCamera?b.multiplyScalar(e):o.object.isOrthographicCamera?(o.object.zoom*=e,o.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(1!==(e=1+(j.y-k.y)*o.zoomSpeed)&&e>0&&(o.object.isPerspectiveCamera?b.multiplyScalar(e):o.object.isOrthographicCamera?(o.object.zoom/=e,o.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),o.staticMoving?k.copy(j):k.y+=(j.y-k.y)*this.dynamicDampingFactor)},this.panCamera=(O=new n,U=new r,V=new r,function(){if(O.copy(S).sub(M),O.lengthSq()){if(o.object.isOrthographicCamera){var e=(o.object.right-o.object.left)/o.object.zoom/o.domElement.clientWidth,t=(o.object.top-o.object.bottom)/o.object.zoom/o.domElement.clientWidth;O.x*=e,O.y*=t}O.multiplyScalar(b.length()*o.panSpeed),V.copy(b).cross(o.object.up).setLength(O.x),V.add(U.copy(o.object.up).setLength(O.y)),o.object.position.add(V),o.target.add(V),o.staticMoving?M.copy(S):M.add(O.subVectors(S,M).multiplyScalar(o.dynamicDampingFactor))}}),this.checkDistances=function(){o.noZoom&&o.noPan||(b.lengthSq()>o.maxDistance*o.maxDistance&&(o.object.position.addVectors(o.target,b.setLength(o.maxDistance)),k.copy(j)),b.lengthSq()<o.minDistance*o.minDistance&&(o.object.position.addVectors(o.target,b.setLength(o.minDistance)),k.copy(j)))},this.update=function(){b.subVectors(o.object.position,o.target),o.noRotate||o.rotateCamera(),o.noZoom||o.zoomCamera(),o.noPan||o.panCamera(),o.object.position.addVectors(o.target,b),o.object.isPerspectiveCamera?(o.checkDistances(),o.object.lookAt(o.target),m.distanceToSquared(o.object.position)>p&&(o.dispatchEvent(A),m.copy(o.object.position))):o.object.isOrthographicCamera?(o.object.lookAt(o.target),(m.distanceToSquared(o.object.position)>p||g!==o.object.zoom)&&(o.dispatchEvent(A),m.copy(o.object.position),g=o.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){f=a,y=a,o.target.copy(o.target0),o.object.position.copy(o.position0),o.object.up.copy(o.up0),o.object.zoom=o.zoom0,o.object.updateProjectionMatrix(),b.subVectors(o.object.position,o.target),o.object.lookAt(o.target),o.dispatchEvent(A),m.copy(o.object.position),g=o.object.zoom},this.dispose=function(){o.domElement.removeEventListener("contextmenu",ee,!1),o.domElement.removeEventListener("pointerdown",F,!1),o.domElement.removeEventListener("wheel",N,!1),o.domElement.removeEventListener("touchstart",Q,!1),o.domElement.removeEventListener("touchend",K,!1),o.domElement.removeEventListener("touchmove",J,!1),o.domElement.ownerDocument.removeEventListener("pointermove",W,!1),o.domElement.ownerDocument.removeEventListener("pointerup",Z,!1),window.removeEventListener("keydown",_,!1),window.removeEventListener("keyup",$,!1)},this.domElement.addEventListener("contextmenu",ee,!1),this.domElement.addEventListener("pointerdown",F,!1),this.domElement.addEventListener("wheel",N,!1),this.domElement.addEventListener("touchstart",Q,!1),this.domElement.addEventListener("touchend",K,!1),this.domElement.addEventListener("touchmove",J,!1),this.domElement.ownerDocument.addEventListener("pointermove",W,!1),this.domElement.ownerDocument.addEventListener("pointerup",Z,!1),window.addEventListener("keydown",_,!1),window.addEventListener("keyup",$,!1),this.handleResize(),this.update()};(A.prototype=Object.create(a.prototype)).constructor=A;var L={computeTangents:function(e){var t=e.index,o=e.attributes;if(null!==t&&void 0!==o.position&&void 0!==o.normal&&void 0!==o.uv){var i=t.array,s=o.position.array,a=o.normal.array,h=o.uv.array,l=s.length/3;void 0===o.tangent&&e.setAttribute("tangent",new c(new Float32Array(4*l),4));for(var u=o.tangent.array,d=[],p=[],m=0;m<l;m++)d[m]=new r,p[m]=new r;var g=new r,f=new r,y=new r,b=new n,v=new n,w=new n,E=new r,x=new r,k=e.groups;0===k.length&&(k=[{start:0,count:i.length}]);m=0;for(var j=k.length;m<j;++m)for(var T=P=(C=k[m]).start,B=P+C.count;T<B;T+=3)X(i[T+0],i[T+1],i[T+2]);var M,S,A,L=new r,D=new r,z=new r,R=new r;for(m=0,j=k.length;m<j;++m){var C,P;for(T=P=(C=k[m]).start,B=P+C.count;T<B;T+=3)G(i[T+0]),G(i[T+1]),G(i[T+2])}}else console.error("THREE.BufferGeometryUtils: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function X(e,t,o){g.fromArray(s,3*e),f.fromArray(s,3*t),y.fromArray(s,3*o),b.fromArray(h,2*e),v.fromArray(h,2*t),w.fromArray(h,2*o),f.sub(g),y.sub(g),v.sub(b),w.sub(b);var i=1/(v.x*w.y-w.x*v.y);isFinite(i)&&(E.copy(f).multiplyScalar(w.y).addScaledVector(y,-v.y).multiplyScalar(i),x.copy(y).multiplyScalar(v.x).addScaledVector(f,-w.x).multiplyScalar(i),d[e].add(E),d[t].add(E),d[o].add(E),p[e].add(x),p[t].add(x),p[o].add(x))}function G(e){z.fromArray(a,3*e),R.copy(z),S=d[e],L.copy(S),L.sub(z.multiplyScalar(z.dot(S))).normalize(),D.crossVectors(R,S),A=D.dot(p[e]),M=A<0?-1:1,u[4*e]=L.x,u[4*e+1]=L.y,u[4*e+2]=L.z,u[4*e+3]=M}},mergeBufferGeometries:function(e,t){for(var o=null!==e[0].index,i=new Set(Object.keys(e[0].attributes)),r=new Set(Object.keys(e[0].morphAttributes)),n={},s={},a=e[0].morphTargetsRelative,c=new h,l=0,u=0;u<e.length;++u){var d=e[u],p=0;if(o!==(null!==d.index))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(var m in d.attributes){if(!i.has(m))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+'. All geometries must have compatible attributes; make sure "'+m+'" attribute exists among all geometries, or in none of them.'),null;void 0===n[m]&&(n[m]=[]),n[m].push(d.attributes[m]),p++}if(p!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". Make sure all geometries have the same number of attributes."),null;if(a!==d.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(var m in d.morphAttributes){if(!r.has(m))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===s[m]&&(s[m]=[]),s[m].push(d.morphAttributes[m])}if(c.userData.mergedUserData=c.userData.mergedUserData||[],c.userData.mergedUserData.push(d.userData),t){var g;if(o)g=d.index.count;else{if(void 0===d.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". The geometry must have either an index or a position attribute"),null;g=d.attributes.position.count}c.addGroup(l,g,u),l+=g}}if(o){var f=0,y=[];for(u=0;u<e.length;++u){for(var b=e[u].index,v=0;v<b.count;++v)y.push(b.getX(v)+f);f+=e[u].attributes.position.count}c.setIndex(y)}for(var m in n){var w=this.mergeBufferAttributes(n[m]);if(!w)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+m+" attribute."),null;c.setAttribute(m,w)}for(var m in s){var E=s[m][0].length;if(0===E)break;c.morphAttributes=c.morphAttributes||{},c.morphAttributes[m]=[];for(u=0;u<E;++u){var x=[];for(v=0;v<s[m].length;++v)x.push(s[m][v][u]);var k=this.mergeBufferAttributes(x);if(!k)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+m+" morphAttribute."),null;c.morphAttributes[m].push(k)}}return c},mergeBufferAttributes:function(e){for(var t,o,i,r=0,n=0;n<e.length;++n){var s=e[n];if(s.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===t&&(t=s.array.constructor),t!==s.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===o&&(o=s.itemSize),o!==s.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===i&&(i=s.normalized),i!==s.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;r+=s.array.length}var a=new t(r),h=0;for(n=0;n<e.length;++n)a.set(e[n].array,h),h+=e[n].array.length;return new c(a,o,i)},interleaveAttributes:function(e){for(var t,o=0,i=0,r=0,n=e.length;r<n;++r){var s=e[r];if(void 0===t&&(t=s.array.constructor),t!==s.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;o+=s.array.length,i+=s.itemSize}var a=new l(new t(o),i),c=0,h=[],d=["getX","getY","getZ","getW"],p=["setX","setY","setZ","setW"],m=0;for(n=e.length;m<n;m++){var g=(s=e[m]).itemSize,f=s.count,y=new u(a,g,c,s.normalized);h.push(y),c+=g;for(var b=0;b<f;b++)for(var v=0;v<g;v++)y[p[v]](b,s[d[v]](b))}return h},estimateBytesUsed:function(e){var t=0;for(var o in e.attributes){var i=e.getAttribute(o);t+=i.count*i.itemSize*i.array.BYTES_PER_ELEMENT}var r=e.getIndex();return t+=r?r.count*r.itemSize*r.array.BYTES_PER_ELEMENT:0},mergeVertices:function(e,t=1e-4){t=Math.max(t,Number.EPSILON);for(var o={},i=e.getIndex(),r=e.getAttribute("position"),n=i?i.count:r.count,s=0,a=Object.keys(e.attributes),h={},l={},u=[],d=["getX","getY","getZ","getW"],p=0,m=a.length;p<m;p++){h[w=a[p]]=[],(j=e.morphAttributes[w])&&(l[w]=new Array(j.length).fill().map((()=>[])))}var g=Math.log10(1/t),f=Math.pow(10,g);for(p=0;p<n;p++){var y=i?i.getX(p):p,b="",v=0;for(m=a.length;v<m;v++)for(var w=a[v],E=(k=e.getAttribute(w)).itemSize,x=0;x<E;x++)b+=~~(k[d[x]](y)*f)+",";if(b in o)u.push(o[b]);else{for(v=0,m=a.length;v<m;v++){w=a[v];var k=e.getAttribute(w),j=e.morphAttributes[w],T=(E=k.itemSize,h[w]),B=l[w];for(x=0;x<E;x++){var M=d[x];if(T.push(k[M](y)),j)for(var S=0,A=j.length;S<A;S++)B[S].push(j[S][M](y))}}o[b]=s,u.push(s),s++}}const L=e.clone();for(p=0,m=a.length;p<m;p++){w=a[p];var D=e.getAttribute(w),z=new D.array.constructor(h[w]);k=new c(z,D.itemSize,D.normalized);if(L.setAttribute(w,k),w in l)for(v=0;v<l[w].length;v++){var R=e.morphAttributes[w][v],C=(z=new R.array.constructor(l[w][v]),new c(z,R.itemSize,R.normalized));L.morphAttributes[w][v]=C}}return L.setIndex(u),L},toTrianglesDrawMode:function(e,t){if(t===d)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===p||t===m){var o=e.getIndex();if(null===o){var i=[],r=e.getAttribute("position");if(void 0===r)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var n=0;n<r.count;n++)i.push(n);e.setIndex(i),o=e.getIndex()}var s=o.count-2,a=[];if(t===p)for(n=1;n<=s;n++)a.push(o.getX(0)),a.push(o.getX(n)),a.push(o.getX(n+1));else for(n=0;n<s;n++)n%2==0?(a.push(o.getX(n)),a.push(o.getX(n+1)),a.push(o.getX(n+2))):(a.push(o.getX(n+2)),a.push(o.getX(n+1)),a.push(o.getX(n)));a.length/3!==s&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=e.clone();return c.setIndex(a),c.clearGroups(),c}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}};window.customElements.define("ray-cast",class extends e{static get properties(){return{container:{type:Object},camera:{type:Object},controls:{type:Object},scene:{type:Object},renderer:{type:Object},pickingTexture:{type:Object},pickingScene:{type:Object},highlightShape:{type:Object},mouse:{type:Object},mousePosX:{type:Object},mousePosY:{type:Object},infoVisible:{type:String},offset:{type:Object},pickingData:{type:Object},cursorType:{type:String},canClick:{type:Boolean},link:{type:String},duplicated:{type:Boolean},que:{type:Object},work:{type:Object},queBig:{type:Object},workBig:{type:Object},files:{type:Array}}}constructor(){super(),this.mouse=new n,this.mousePosX="0px",this.mousePosY="0px",this.beganTouching=!1,this.offset=new r(1,1,1),this.duplicated=!1,this.pickingData=[],this.cursorType="grab",this.canClick=!1,this.link="",this.addEventListener("click",this.clickLink),this.addEventListener("touchstart",this.touchStart),this.addEventListener("touchmove",this.touchMove),this.addEventListener("touchcancel",this.touchMove),this.addEventListener("touchend",this.touchEnd)}render(){return t`<style>:host{cursor:${this.cursorType}}.followMouse{top:${this.mousePosY};left:${this.mousePosX};color:#fff;font-size:50px;visibility:${this.infoVisible};position:absolute;z-index:10}#crosshair{top:${this.YCenter};left:${this.XCenter};position:absolute;visibility:hidden;width:0;height:0;z-index:100}#upSpoke{background:#fff;height:10px;width:2px;transform:translateY(-3px)}#sideSpoke{background:#fff;height:2px;width:10px;transform:translate(-4px,-9px)}@media (hover:none){#crosshair{visibility:visible}}</style><div id="container"></div><div id="infoText" class="followMouse"></div><div id="crosshair"><div id="upSpoke"></div><div id="sideSpoke"></div></div>`}async firstUpdated(){await new Promise((e=>setTimeout(e,0))),this.init(),this.animate()}init(){this.container=this.shadowRoot.getElementById("container"),this.camera=new g(70,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.z=1e3,this.XCenter=window.innerWidth/2+"px",this.YCenter=window.innerHeight/2+"px",this.mousePosX=this.XCenter,this.mousePosY=this.YCenter,this.scene=new f,this.scene.background=new y(4342338),this.pickingScene=new f,this.pickingTexture=new b(1,1),this.scene.add(new v(5592405));const e=new w(16777215,1.5);e.position.set(0,500,2e4),this.scene.add(e),this.files=["que","work","github","math"],this.work=this.loadModel("/src/assets/models/gltf/radcam.glb"),this.workBig=this.loadModel("/src/assets/models/gltf/radcamBig.glb"),this.que=this.loadModel("/src/assets/models/gltf/questionmark.glb"),this.queBig=this.loadModel("/src/assets/models/gltf/questionmarkBig.glb"),this.github=this.loadModel("/src/assets/models/gltf/github.glb"),this.githubBig=this.loadModel("/src/assets/models/gltf/githubBig.glb"),this.math=this.loadModel("/src/assets/models/gltf/math.glb"),this.mathBig=this.loadModel("/src/assets/models/gltf/mathBig.glb"),this.renderer=new E({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.container.appendChild(this.renderer.domElement),this.controls=new A(this.camera,this.renderer.domElement),this.controls.rotateSpeed=-1,this.controls.zoomSpeed=1.2,this.controls.panSpeed=-.8,this.controls.noZoom=!1,this.controls.noPan=!1,this.controls.staticMoving=!0,this.controls.dynamicDampingFactor=.3,this.renderer.domElement.addEventListener("mousemove",this.onMouseMove.bind(this)),window.addEventListener("resize",this.onWindowResize.bind(this),!1)}onWindowResize(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.XCenter=window.innerWidth/2+"px",this.YCenter=window.innerHeight/2+"px",this.mousePosX=this.XCenter,this.mousePosY=this.YCenter}onMouseMove(e){this.mouse.x=e.clientX,this.mouse.y=e.clientY,this.mousePosX=this.mouse.x+15+"px",this.mousePosY=this.mouse.y+15+"px"}loadModel(e){var t=new o,i=new x;return t.load(e,(function(e){e.scene.traverse((function(e){})),i.add(e.scene)})),i}animate(){window.requestAnimationFrame((()=>this.animate())),0==this.duplicated&&this.duplicate(),1==this.duplicated&&this.threeRender()}threeRender(){this.controls.update(),this.pick(),this.renderer.setRenderTarget(null),this.renderer.render(this.scene,this.camera)}duplicate(){var e=this.files;const t={},o={},i=new k,n=new s,a=new y,c=new j({vertexColors:!0}),h=new T({color:16777215,flatShading:!0,vertexColors:!0,shininess:0});var l=this.cloneFiles(e);if(null!=l){for(var u in this.parentElement.children.loading.style.visibility="hidden",e){var d=e[u];t[d]=[],o[d]=[]}for(let s=1;s<51;s++){var p=l[Math.floor(Math.random()*e.length)],m=p.data.clone();const c=new r;c.x=1e4*Math.random()-5e3,c.y=6e3*Math.random()-3e3,c.z=8e3*Math.random()-4e3;const h=new B;h.x=2*Math.random()*Math.PI,h.y=2*Math.random()*Math.PI,h.z=2*Math.random()*Math.PI;const u=new r(50,50,50);n.setFromEuler(h),i.compose(c,n,u),m.applyMatrix4(i),this.applyVertexColors(m,a.setHex(394758)),t[p.type].push(m),m=m.clone(),this.applyVertexColors(m,a.setHex(s)),o[p.type].push(m),this.pickingData[s]={position:c,rotation:h,scale:u,type:p.type}}for(var u in this.highlightShape={},e){var g=e[u];if("work"==g)var f=13199411;if("github"==g)f=3608130;if("que"==g)f=16728418;if("math"==g)f=12575679;this.highlightShape[e[u]]=new M(l[u].bigData,new T({color:f,flatShading:!1,shininess:150})),this.scene.add(this.highlightShape[e[u]]),this.objects=new M(L.mergeBufferGeometries(t[e[u]]),h),this.scene.add(this.objects),this.pickingScene.add(new M(L.mergeBufferGeometries(o[e[u]]),c))}this.duplicated=!0}}cloneFiles(e){for(var t in e){var o=_.get(this,[e[t],"children",0,"children"],null),i=_.get(this,[e[t]+"Big","children",0,"children"],null);if(null==o||null==i)return null}var r=[];for(var t in e){var n={},s=e[t],a=_.get(this,[s,"children",0,"children"]);if(a.find((e=>"Mesh"==e.type)))n.data=a.find((e=>"Mesh"==e.type)).geometry;else{var c=a.find((e=>"Group"==e.type));if(c){for(var h=[],l=0;l<c.children.length;l++){var u=c.children[l].geometry;h.push(u)}var d=L.mergeBufferGeometries(h);n.data=d}}var p=_.get(this,[s+"Big","children",0,"children"]);if(p.find((e=>"Mesh"==e.type)))n.bigData=p.find((e=>"Mesh"==e.type)).geometry;else{var m=p.find((e=>"Group"==e.type));if(m){for(h=[],l=0;l<m.children.length;l++){u=m.children[l].geometry;h.push(u)}d=L.mergeBufferGeometries(h);n.bigData=d}}n.type=s,r.push(n)}return r}pick(){var e=this.mouse.x,t=this.mouse.y;window.matchMedia("(hover: none)").matches&&(e=this.XCenter.replace("px",""),t=this.YCenter.replace("px","")),this.camera.setViewOffset(this.renderer.domElement.width,this.renderer.domElement.height,e*window.devicePixelRatio|0,t*window.devicePixelRatio|0,1,1),this.renderer.setRenderTarget(this.pickingTexture),this.renderer.render(this.pickingScene,this.camera),this.camera.clearViewOffset();const o=new Uint8Array(4);this.renderer.readRenderTargetPixels(this.pickingTexture,0,0,1,1,o);const i=o[0]<<16|o[1]<<8|o[2],r=this.pickingData[i];var n=this.shadowRoot.getElementById("infoText");if(i>0?(this.cursorType="pointer",this.infoVisible="visible","work"==r.type&&(this.link="src/portfolio.html",n.innerHTML="work portfolio"),"github"==r.type&&(this.link="https://github.com/herdofsheep",n.innerHTML="github"),"que"==r.type&&(this.link="src/what.html",n.innerHTML="what's this?"),"math"==r.type&&(this.link="src/art.html",n.innerHTML="art portfolio"),this.canClick=!0):this.infoVisible="hidden",r&&i>0)r.position&&r.rotation&&r.scale&&r.type&&(this.highlightShape[r.type].position.copy(r.position),this.highlightShape[r.type].rotation.copy(r.rotation),this.highlightShape[r.type].scale.copy(r.scale).add(this.offset),this.highlightShape[r.type].visible=!0);else{for(var s in this.files)this.highlightShape[this.files[s]].visible=!1;this.cursorType="cell",this.canClick=!1}}clickLink(){this.canClick&&(window.location.href=this.link)}touchStart(){this.canClick&&(this.beganTouching=!0)}touchMove(){this.beganTouching=!1}touchEnd(){this.canClick&&this.beganTouching&&(window.location.href=this.link)}applyVertexColors(e,t){const o=e.attributes.position,i=[];for(let e=0;e<o.count;e++)i.push(t.r,t.g,t.b);e.setAttribute("color",new S(i,3))}});
