import{V as e,M as t,q as n,Q as a,r as o,a as i,E as s,L as r,h as c,S as h,P as m,H as u,s as l,t as d,k as p,n as b,g as E,G as g,i as f}from"./GLTFLoader-d5e55cd7.js";var w=function(s,r){var c,h,m,u,l,d;void 0===r&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),r===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=s,this.domElement=r,this.enabled=!0,this.target=new e,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:t.ROTATE,MIDDLE:t.DOLLY,RIGHT:t.PAN},this.touches={ONE:n.ROTATE,TWO:n.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return O.phi},this.getAzimuthalAngle=function(){return O.theta},this.saveState=function(){p.target0.copy(p.target),p.position0.copy(p.object.position),p.zoom0=p.object.zoom},this.reset=function(){p.target.copy(p.target0),p.object.position.copy(p.position0),p.object.zoom=p.zoom0,p.object.updateProjectionMatrix(),p.dispatchEvent(b),p.update(),w=f.NONE},this.update=(c=new e,h=(new a).setFromUnitVectors(s.up,new e(0,1,0)),m=h.clone().invert(),u=new e,l=new a,d=2*Math.PI,function(){var e=p.object.position;c.copy(e).sub(p.target),c.applyQuaternion(h),O.setFromVector3(c),p.autoRotate&&w===f.NONE&&H(2*Math.PI/60/60*p.autoRotateSpeed),p.enableDamping?(O.theta+=y.theta*p.dampingFactor,O.phi+=y.phi*p.dampingFactor):(O.theta+=y.theta,O.phi+=y.phi);var t=p.minAzimuthAngle,n=p.maxAzimuthAngle;return isFinite(t)&&isFinite(n)&&(t<-Math.PI?t+=d:t>Math.PI&&(t-=d),n<-Math.PI?n+=d:n>Math.PI&&(n-=d),O.theta=t<=n?Math.max(t,Math.min(n,O.theta)):O.theta>(t+n)/2?Math.max(t,O.theta):Math.min(n,O.theta)),O.phi=Math.max(p.minPolarAngle,Math.min(p.maxPolarAngle,O.phi)),O.makeSafe(),O.radius*=T,O.radius=Math.max(p.minDistance,Math.min(p.maxDistance,O.radius)),!0===p.enableDamping?p.target.addScaledVector(P,p.dampingFactor):p.target.add(P),c.setFromSpherical(O),c.applyQuaternion(m),e.copy(p.target).add(c),p.object.lookAt(p.target),!0===p.enableDamping?(y.theta*=1-p.dampingFactor,y.phi*=1-p.dampingFactor,P.multiplyScalar(1-p.dampingFactor)):(y.set(0,0,0),P.set(0,0,0)),T=1,!!(L||u.distanceToSquared(p.object.position)>v||8*(1-l.dot(p.object.quaternion))>v)&&(p.dispatchEvent(b),u.copy(p.object.position),l.copy(p.object.quaternion),L=!1,!0)}),this.dispose=function(){p.domElement.removeEventListener("contextmenu",se,!1),p.domElement.removeEventListener("pointerdown",$,!1),p.domElement.removeEventListener("wheel",te,!1),p.domElement.removeEventListener("touchstart",ae,!1),p.domElement.removeEventListener("touchend",ie,!1),p.domElement.removeEventListener("touchmove",oe,!1),p.domElement.ownerDocument.removeEventListener("pointermove",J,!1),p.domElement.ownerDocument.removeEventListener("pointerup",ee,!1),p.domElement.removeEventListener("keydown",ne,!1)};var p=this,b={type:"change"},E={type:"start"},g={type:"end"},f={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},w=f.NONE,v=1e-6,O=new o,y=new o,T=1,P=new e,L=!1,j=new i,A=new i,N=new i,R=new i,M=new i,k=new i,D=new i,Y=new i,x=new i;function S(){return Math.pow(.95,p.zoomSpeed)}function H(e){y.theta-=e}function C(e){y.phi-=e}var z,I=(z=new e,function(e,t){z.setFromMatrixColumn(t,0),z.multiplyScalar(-e),P.add(z)}),X=function(){var t=new e;return function(e,n){!0===p.screenSpacePanning?t.setFromMatrixColumn(n,1):(t.setFromMatrixColumn(n,0),t.crossVectors(p.object.up,t)),t.multiplyScalar(e),P.add(t)}}(),F=function(){var t=new e;return function(e,n){var a=p.domElement;if(p.object.isPerspectiveCamera){var o=p.object.position;t.copy(o).sub(p.target);var i=t.length();i*=Math.tan(p.object.fov/2*Math.PI/180),I(2*e*i/a.clientHeight,p.object.matrix),X(2*n*i/a.clientHeight,p.object.matrix)}else p.object.isOrthographicCamera?(I(e*(p.object.right-p.object.left)/p.object.zoom/a.clientWidth,p.object.matrix),X(n*(p.object.top-p.object.bottom)/p.object.zoom/a.clientHeight,p.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),p.enablePan=!1)}}();function _(e){p.object.isPerspectiveCamera?T/=e:p.object.isOrthographicCamera?(p.object.zoom=Math.max(p.minZoom,Math.min(p.maxZoom,p.object.zoom*e)),p.object.updateProjectionMatrix(),L=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),p.enableZoom=!1)}function Z(e){p.object.isPerspectiveCamera?T*=e:p.object.isOrthographicCamera?(p.object.zoom=Math.max(p.minZoom,Math.min(p.maxZoom,p.object.zoom/e)),p.object.updateProjectionMatrix(),L=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),p.enableZoom=!1)}function U(e){j.set(e.clientX,e.clientY)}function W(e){R.set(e.clientX,e.clientY)}function G(e){if(1==e.touches.length)j.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);j.set(t,n)}}function V(e){if(1==e.touches.length)R.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);R.set(t,n)}}function B(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);D.set(0,a)}function K(e){if(1==e.touches.length)A.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);A.set(t,n)}N.subVectors(A,j).multiplyScalar(p.rotateSpeed);var a=p.domElement;H(2*Math.PI*N.x/a.clientHeight),C(2*Math.PI*N.y/a.clientHeight),j.copy(A)}function q(e){if(1==e.touches.length)M.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);M.set(t,n)}k.subVectors(M,R).multiplyScalar(p.panSpeed),F(k.x,k.y),R.copy(M)}function Q(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);Y.set(0,a),x.set(0,Math.pow(Y.y/D.y,p.zoomSpeed)),_(x.y),D.copy(Y)}function $(e){if(!1!==p.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){var n;switch(e.preventDefault(),p.domElement.focus?p.domElement.focus():window.focus(),e.button){case 0:n=p.mouseButtons.LEFT;break;case 1:n=p.mouseButtons.MIDDLE;break;case 2:n=p.mouseButtons.RIGHT;break;default:n=-1}switch(n){case t.DOLLY:if(!1===p.enableZoom)return;!function(e){D.set(e.clientX,e.clientY)}(e),w=f.DOLLY;break;case t.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===p.enablePan)return;W(e),w=f.PAN}else{if(!1===p.enableRotate)return;U(e),w=f.ROTATE}break;case t.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===p.enableRotate)return;U(e),w=f.ROTATE}else{if(!1===p.enablePan)return;W(e),w=f.PAN}break;default:w=f.NONE}w!==f.NONE&&(p.domElement.ownerDocument.addEventListener("pointermove",J,!1),p.domElement.ownerDocument.addEventListener("pointerup",ee,!1),p.dispatchEvent(E))}(e)}}function J(e){if(!1!==p.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1===p.enabled)return;switch(e.preventDefault(),w){case f.ROTATE:if(!1===p.enableRotate)return;!function(e){A.set(e.clientX,e.clientY),N.subVectors(A,j).multiplyScalar(p.rotateSpeed);var t=p.domElement;H(2*Math.PI*N.x/t.clientHeight),C(2*Math.PI*N.y/t.clientHeight),j.copy(A),p.update()}(e);break;case f.DOLLY:if(!1===p.enableZoom)return;!function(e){Y.set(e.clientX,e.clientY),x.subVectors(Y,D),x.y>0?_(S()):x.y<0&&Z(S()),D.copy(Y),p.update()}(e);break;case f.PAN:if(!1===p.enablePan)return;!function(e){M.set(e.clientX,e.clientY),k.subVectors(M,R).multiplyScalar(p.panSpeed),F(k.x,k.y),R.copy(M),p.update()}(e)}}(e)}}function ee(e){switch(e.pointerType){case"mouse":case"pen":!function(e){if(p.domElement.ownerDocument.removeEventListener("pointermove",J,!1),p.domElement.ownerDocument.removeEventListener("pointerup",ee,!1),!1===p.enabled)return;p.dispatchEvent(g),w=f.NONE}()}}function te(e){!1===p.enabled||!1===p.enableZoom||w!==f.NONE&&w!==f.ROTATE||(e.preventDefault(),e.stopPropagation(),p.dispatchEvent(E),function(e){e.deltaY<0?Z(S()):e.deltaY>0&&_(S()),p.update()}(e),p.dispatchEvent(g))}function ne(e){!1!==p.enabled&&!1!==p.enableKeys&&!1!==p.enablePan&&function(e){var t=!1;switch(e.keyCode){case p.keys.UP:F(0,p.keyPanSpeed),t=!0;break;case p.keys.BOTTOM:F(0,-p.keyPanSpeed),t=!0;break;case p.keys.LEFT:F(p.keyPanSpeed,0),t=!0;break;case p.keys.RIGHT:F(-p.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),p.update())}(e)}function ae(e){if(!1!==p.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(p.touches.ONE){case n.ROTATE:if(!1===p.enableRotate)return;G(e),w=f.TOUCH_ROTATE;break;case n.PAN:if(!1===p.enablePan)return;V(e),w=f.TOUCH_PAN;break;default:w=f.NONE}break;case 2:switch(p.touches.TWO){case n.DOLLY_PAN:if(!1===p.enableZoom&&!1===p.enablePan)return;!function(e){p.enableZoom&&B(e),p.enablePan&&V(e)}(e),w=f.TOUCH_DOLLY_PAN;break;case n.DOLLY_ROTATE:if(!1===p.enableZoom&&!1===p.enableRotate)return;!function(e){p.enableZoom&&B(e),p.enableRotate&&G(e)}(e),w=f.TOUCH_DOLLY_ROTATE;break;default:w=f.NONE}break;default:w=f.NONE}w!==f.NONE&&p.dispatchEvent(E)}}function oe(e){if(!1!==p.enabled)switch(e.preventDefault(),e.stopPropagation(),w){case f.TOUCH_ROTATE:if(!1===p.enableRotate)return;K(e),p.update();break;case f.TOUCH_PAN:if(!1===p.enablePan)return;q(e),p.update();break;case f.TOUCH_DOLLY_PAN:if(!1===p.enableZoom&&!1===p.enablePan)return;!function(e){p.enableZoom&&Q(e),p.enablePan&&q(e)}(e),p.update();break;case f.TOUCH_DOLLY_ROTATE:if(!1===p.enableZoom&&!1===p.enableRotate)return;!function(e){p.enableZoom&&Q(e),p.enableRotate&&K(e)}(e),p.update();break;default:w=f.NONE}}function ie(e){!1!==p.enabled&&(p.dispatchEvent(g),w=f.NONE)}function se(e){!1!==p.enabled&&e.preventDefault()}p.domElement.addEventListener("contextmenu",se,!1),p.domElement.addEventListener("pointerdown",$,!1),p.domElement.addEventListener("wheel",te,!1),p.domElement.addEventListener("touchstart",ae,!1),p.domElement.addEventListener("touchend",ie,!1),p.domElement.addEventListener("touchmove",oe,!1),p.domElement.addEventListener("keydown",ne,!1),this.update()};(w.prototype=Object.create(s.prototype)).constructor=w;var v=function(e,a){w.call(this,e,a),this.screenSpacePanning=!1,this.mouseButtons.LEFT=t.PAN,this.mouseButtons.RIGHT=t.ROTATE,this.touches.ONE=n.PAN,this.touches.TWO=n.DOLLY_ROTATE};(v.prototype=Object.create(s.prototype)).constructor=v;window.customElements.define("mathena-3d",class extends r{static get properties(){return{container:{type:Object},camera:{type:Object},controls:{type:Object},scene:{type:Object},renderer:{type:Object},mathena:{type:Object},kitty:{type:String}}}constructor(){super(),this.init(),this.animate()}render(){return c`<p>template content</p>${this.kitty}`}init(){this.container=document.getElementById("container"),this.scene=new h,this.camera=new m(45,window.innerWidth/window.innerHeight,.1,500),this.camera.position.set(0,0,2);var e=new u(12303359,4473890);e.position.set(0,1,0),this.scene.add(e);var t=(new l).load("assets/images/planets.jpg"),n=new d(1.3847*15,4.5),a=new p({map:t}),o=new b(n,a);o.material.depthTest=!1,o.material.depthWrite=!1,this.scene.add(o),this.mathena=this.loadModel("assets/models/gltf/mathena.gltf"),this.scene.add(this.mathena),this.renderer=new E({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.gammaOutput=!0,this.container.appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.controls=new w(this.camera,this.renderer.domElement),this.controls.update()}loadModel(e){var t=new g,n=new f;return t.load(e,(function(e){e.scene.traverse((function(e){})),n.add(e.scene)})),n}onWindowResize(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}animate(){window.requestAnimationFrame(()=>this.animate()),this.render()}render(){var e=5e-4*Date.now();this.mathena.rotation.x=2*e,this.mathena.rotation.y=e;var t=9*Math.cos(.1*e);this.mathena.position.setX(t),this.camera.position.set(t,0,3),this.camera.lookAt(this.mathena.position),this.renderer.render(this.scene,this.camera)}});
